(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,n){e.exports=n(208)},152:function(e,t){},208:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(27),i=n.n(a),c=n(39),u=n(40),s=n(43),d=n(41),f=n(44),m=n(55),l=n.n(m),p=l()({loader:function(){return Promise.all([n.e(3),n.e(1)]).then(n.bind(null,372))},loading:function(){return o.a.createElement("div",null,"Loading")}}),h=function(){return o.a.createElement(p,null)},y=l()({loader:function(){return n.e(2).then(n.bind(null,369))},loading:function(){return o.a.createElement("div",null,"Loading")}}),O=function(){return o.a.createElement(y,null)},b=n(54),v=n(368),_=n(58),E=n(371),L=n(108),g=n(24),w=function(e){function t(){var e,n;Object(c.a)(this,t);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(n=Object(s.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={name:""},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,"Login Page"),"Input name:\xa0",o.a.createElement(E.a,{value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},size:"small",style:{width:"100px"}}),"\xa0",o.a.createElement(v.a,{to:"/home"},o.a.createElement(L.a,{onClick:function(){return e.props.login(e.state.name,g.a.emitRegisterNewUser)}},"Click to login")))}}]),t}(r.Component),j=Object(b.b)(function(e){return{user:e.user}},function(e){return{login:function(t,n){e(Object(_.b)(t,n))},verify:function(){e(Object(_.e)())}}})(w),R=n(373),x=n(375),I=n(374),k=(n(205),function(e){function t(){return Object(c.a)(this,t),Object(s.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(R.a,null,o.a.createElement(x.a,null,o.a.createElement(I.a,{exact:!0,path:"/home",component:h}),o.a.createElement(I.a,{exact:!0,path:"/",component:j}),o.a.createElement(I.a,{path:"/room",component:O})))}}]),t}(r.Component)),D=n(25),N=n(114),S=n(8),T={name:null,id:null,userList:[]},C={currentRoom:"",roomList:[]},U=Object(D.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USER_LIST":return Object(S.a)({},e,{userList:t.payload});case"NEW_USER":return Object(S.a)({},e,{userList:-1==e.userList.indexOf(t.payload)?e.userList.concat([t.payload]):e.userList});case"NOTIFY_USER_DISCONNECTED":return Object(S.a)({},e,{userList:e.userList.filter(function(e){return e.id!=t.payload})});case"LOGIN":return Object(S.a)({},e,{name:t.payload.name,id:t.payload.id});case"LOGOUT":return{name:null,id:null,userList:[]};case"VERIFY":return{token:t.payload};default:return e}},room:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ROOM":return{currentRoom:"",roomList:t.payload};case"CREATE_ROOM":return{currentRoom:t.payload.id,roomList:-1==e.roomList.indexOf(t.payload)?e.roomList.concat([t.payload]):e.roomList};case"NOTIFY_NEW_ROOM_HAS_BEEN_CREATED":return Object(S.a)({},e,{roomList:-1==e.roomList.indexOf(t.payload)?e.roomList.concat([t.payload]):e.roomList});case"JOIN_ROOM":var n=e.roomList.map(function(e){return e.id==t.payload.id?Object(S.a)({},e,{peers:-1==e.peers.indexOf(t.payload.peer)?e.peers.concat([t.payload.peer]):e.peers}):e});return Object(S.a)({},e,{currentRoom:t.payload.id,roomList:n});case"NOTIFY_NEW_PEER_JOINED":var r=e.roomList.map(function(e){return e.id==t.payload.id?Object(S.a)({},e,{peers:-1==e.peers.indexOf(t.payload.peer)?e.peers.concat([t.payload.peer]):e.peers}):e});return Object(S.a)({},e,{roomList:r});case"NOTIFY_USER_LEFT_ROOM":var o=t.payload,a=o.roomID,i=o.peerID,c=o.removeRoom,u=o.newHost;if(1==c)return Object(S.a)({},e,{roomList:e.roomList.filter(function(e){return e.id!=a})});var s=e.roomList.map(function(e){return e.id==a?(0!=u&&e.peers.shift(),Object(S.a)({},e,{peers:0!=u?e.peers:e.peers.filter(function(e){return e.id!=i}),host:0!=u?u:e.host})):Object(S.a)({},e)});return Object(S.a)({},e,{roomList:s});default:return e}}}),M=n(115);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(M.createLogger)();var P=Object(D.d)(U,Object(D.a)(N.a));i.a.render(o.a.createElement(function(){return o.a.createElement(b.a,{store:P},o.a.createElement(k,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},24:function(e,t,n){"use strict";var r=n(111),o=n.n(r),a=n(26),i=o()("https://scc-live.herokuapp.com/"),c={onNotifyNewUserConnected:function(e,t){i.on("notify_new_user_connected",function(e){t(e)})},onNotifyUserDisconnected:function(e,t){i.on("notify_user_disconnected",function(e){t(e)})},emitRegisterNewUser:function(e,t){i.emit("register_new_user",e,t)},emitLoadUsers:function(e,t){i.emit("load_users",e,t)},emitLoadRooms:function(e,t){i.emit("load_rooms",e,t)},onNotifyNewRoomHasBeenCreated:function(e,t){i.on("notify_new_room_has_been_created",function(e){t(e)})},emitCreateRoom:function(e,t){i.emit("create_room",e,t)},onNotifyRoomClosed:function(e,t){i.on("notify_room_closed",function(e){t(e)})},emitJoinRoom:function(e,t){i.emit("join_room",e,t)},onNotifyNewUserJoinedRoom:function(e,t){i.on("notify_new_user_joined_room",function(e){var n=e.id,r=e.peer;t({id:n,peer:r})})},emitLeftRoom:function(e,t){i.emit("left_room",e,t)},onNotifyUserLeftRoom:function(e,t){i.on("notify_user_left_room",function(e){var n=e.roomID,r=e.peerID,o=e.removeRoom,a=e.newHost;t({roomID:n,peerID:r,removeRoom:o,newHost:a})})},emitBroadcastHostShareStream:function(e){i.emit("broadcast_host_share_stream",e,null)},emitNewPeerGetStream:function(e){i.emit("new_peer_get_stream",e)},emitToPeer:function(e,t){i.emit("peer_connect",e,t)},onPeerLeftMyRoom:function(){i.on("peer_close",function(e){Object(a.d)(e)})},onListenPeer:function(){i.on("peer_connect",function(e,t){switch(e.type){case"host_create":Object(a.e)(e.id,e.roomID);break;case"client_create":Object(a.c)(e.id,e.roomID);break;case"add":Object(a.b)(e.id,e.candidate);break;case"offer":Object(a.a)(e.description,e.id,t);break;case"stop":Object(a.i)();break;default:return}})}};t.a=c},26:function(e,t,n){"use strict";n.d(t,"i",function(){return y}),n.d(t,"g",function(){return O}),n.d(t,"f",function(){return b}),n.d(t,"h",function(){return _}),n.d(t,"d",function(){return L}),n.d(t,"e",function(){return w}),n.d(t,"b",function(){return j}),n.d(t,"c",function(){return R}),n.d(t,"a",function(){return x});var r=n(14),o=n.n(r),a=n(34),i=n(24),c="deifcdeanbcgmdahmihammgpkdeddboi",u=[],s=[],d={iceServers:[{urls:["stun:ss-turn1.xirsys.com","turn:ss-turn1.xirsys.com:80?transport=udp","turn:ss-turn1.xirsys.com:3478?transport=udp","turn:ss-turn1.xirsys.com:80?transport=tcp","turn:ss-turn1.xirsys.com:3478?transport=tcp","turns:ss-turn1.xirsys.com:443?transport=tcp","turns:ss-turn1.xirsys.com:5349?transport=tcp"],credential:"9d61b156-f159-11e8-807d-32b0c04e5b2c",username:"9d61b0d4-f159-11e8-96d8-adf817ff6a2f"}]},f={offerToReceiveAudio:1,offerToReceiveVideo:1};function m(e){return l.apply(this,arguments)}function l(){return(l=Object(a.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 2:n=e.sent,u[0]=n,u[0].type="video",h(t,n);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function p(){try{window.chrome.runtime.sendMessage(c,{sources:["window","screen","tab"]},function(e){e&&"success"===e.type?navigator.mediaDevices.getUserMedia({video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e.streamId}}}).then(function(e){u[1]=e,h("myScreen",e)}).catch(function(e){alert("Kh\xf4ng l\u1ea5y \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u t\u1eeb m\xe0n h\xecnh")}):alert("Vui l\xf2ng b\u1eadt plugin")})}catch(e){navigator.mediaDevices.getUserMedia({video:{mediaSource:["screen"]}}).then(function(e){u[1]=e,h("myScreen",e)})}}function h(e,t){try{document.getElementById(e).srcObject=t}catch(n){y()}}function y(){null!=s&&(s.map(function(e){e.peer.close()}),s=[]),u[0]&&u[0].getTracks().forEach(function(e){e.stop()}),u[1]&&u[1].getTracks().forEach(function(e){e.stop()}),u=[]}function O(e){i.a.emitToPeer({type:"stop",id:null,roomID:e})}function b(){return v.apply(this,arguments)}function v(){return(v=Object(a.a)(o.a.mark(function e(){var t,n,r=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]&&r[0],n=r.length>1&&void 0!==r[1]&&r[1],!t||0!=n){e.next=9;break}return e.next=5,y();case 5:return e.next=7,m("myScreen");case 7:e.next=23;break;case 9:if(!n||0!=t){e.next=16;break}return e.next=12,y();case 12:return e.next=14,p();case 14:e.next=23;break;case 16:if(!t||!n){e.next=23;break}return e.next=19,y();case 19:return e.next=21,m("myVideo");case 21:return e.next=23,p();case 23:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function _(e){O(),i.a.emitBroadcastHostShareStream(e)}function E(e,t){var n=new RTCPeerConnection(d);return n.addEventListener("icecandidate",function(n){i.a.emitToPeer({type:"add",candidate:n.candidate,id:e,roomID:t},null)}),n.addEventListener("addstream",function(e){u.push(e.stream),1==u.length?h("myScreen",e.stream):(h("myVideo",u[0]),h("myScreen",e.stream))}),n}var L=function(e){for(var t=0;t<s.length;t++)if(s[t].userID==e){s[t]=s[0],s.shift();break}},g=function(e){for(var t=0;t<s.length;t++)if(s[t].userID==e)return t},w=function(){var e=Object(a.a)(o.a.mark(function e(t,n){var r,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,n);case 2:return r=e.sent,s.push({userID:t,peer:r}),u[0]&&u[0].getTracks().forEach(function(e){return r.addTrack(e,u[0])}),u[1]&&r.addStream(u[1]),e.next=8,r.createOffer(f);case 8:a=e.sent,r.setLocalDescription(a),i.a.emitToPeer({type:"offer",description:a,id:t,roomID:n},function(e){r.setRemoteDescription(e)});case 11:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),j=function(e,t){var n=g(e);s[n].peer.addIceCandidate(t)},R=function(){var e=Object(a.a)(o.a.mark(function e(t,n){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E(t,n);case 2:r=e.sent,s.push({userID:t,peer:r});case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(a.a)(o.a.mark(function e(t,n,r){var a,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=g(n),s[a].peer.setRemoteDescription(t),e.next=4,s[a].peer.createAnswer();case 4:i=e.sent,s[a].peer.setLocalDescription(i),r(i);case 7:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},58:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"d",function(){return a}),n.d(t,"b",function(){return i}),n.d(t,"e",function(){return c});var r=function(e){return function(t){t({type:"LOAD_USER_LIST",payload:e})}},o=function(e){return function(t){t({type:"NEW_USER",payload:e})}},a=function(e){return function(t){t({type:"NOTIFY_USER_DISCONNECTED",payload:e})}},i=function(e,t){return function(n){t(e,function(e,t){n({type:"LOGIN",payload:{name:e,id:t}})})}},c=function(){return function(e){}}}},[[118,5,4]]]);
//# sourceMappingURL=main.6c3762a0.chunk.js.map